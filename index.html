<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>LIFF Reserve</title>

    <!-- LIFF -->
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>

    <!-- flatpickr -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
    />

    <style>
      body {
        font-family: system-ui, -apple-system, "Hiragino Sans", sans-serif;
        margin: 24px;
      }
      h1 {
        font-family: Georgia, serif;
        font-size: 56px;
        margin: 0 0 24px;
      }
      #status {
        margin: 12px 0 18px;
        white-space: pre-wrap;
      }
      .hidden {
        display: none;
      }

      .topbar {
        display: flex;
        align-items: center;
        gap: 10px;
        margin: 10px 0 18px;
      }
      .back {
        border: 0;
        background: #eee;
        padding: 10px 12px;
        border-radius: 10px;
      }

      .section-title {
        font-size: 42px;
        margin: 6px 0 14px;
      }

      /* slots */
      .group {
        margin: 14px 0 18px;
      }
      .group h3 {
        margin: 0 0 8px;
        opacity: 0.6;
        font-weight: 700;
      }
      .slot-btn {
        width: 100%;
        border: 0;
        padding: 18px 16px;
        border-radius: 18px;
        background: #eee;
        margin: 10px 0;
        text-align: left;
        font-size: 18px;
      }

      /* form */
      .card {
        background: #f3f3f3;
        padding: 14px 16px;
        border-radius: 18px;
        margin: 10px 0 18px;
      }
      .label {
        opacity: 0.65;
      }
      input,
      textarea {
        width: 100%;
        border: 0;
        background: #f3f3f3;
        border-radius: 18px;
        padding: 16px;
        font-size: 16px;
        outline: none;
        margin: 10px 0;
      }
      textarea {
        min-height: 120px;
        resize: vertical;
      }
      .primary {
        width: 100%;
        border: 0;
        padding: 18px 16px;
        border-radius: 18px;
        background: #e5e5e5;
        font-size: 18px;
      }
      .hint {
        opacity: 0.6;
        font-size: 13px;
        margin-top: 10px;
      }

      /* ✅ カレンダーは常時表示したいので input は隠す */
      #date {
        display: none;
      }

      /* flatpickr の見た目微調整（必要なら） */
      .flatpickr-calendar {
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
        border-radius: 18px;
      }
    </style>
  </head>

  <body>
    <h1>LIFF Reserve</h1>

    <div id="status">loading...</div>

    <!-- View: Calendar -->
    <section id="viewCalendar">
      <div class="section-title">日付選択</div>

      <input id="date" />
      <div id="calendar"></div>
    </section>

    <!-- View: Slots -->
    <section id="viewSlots" class="hidden">
      <div class="topbar">
        <button id="backToCalendar" class="back">← 日付選択</button>
      </div>

      <div class="section-title">空き時間</div>
      <div id="slotCount"></div>

      <div class="group">
        <h3>午前</h3>
        <div id="slotsAM"></div>
      </div>

      <div class="group">
        <h3>午後</h3>
        <div id="slotsPM"></div>
      </div>
    </section>

    <!-- View: Form -->
    <section id="viewForm" class="hidden">
      <div class="topbar">
        <button id="backToSlots" class="back">← 空き時間</button>
      </div>

      <div class="section-title">入力</div>

      <div class="card" id="summary"></div>

      <div class="label">お客様情報</div>
      <input id="name" placeholder="お名前" autocomplete="name" />
      <input
        id="tel"
        placeholder="電話番号"
        inputmode="numeric"
        autocomplete="tel"
      />

      <div class="label" style="margin-top: 14px">メモ</div>
      <textarea id="note" placeholder="備考（任意）"></textarea>

      <button id="confirmBtn" class="primary">確認へ（仮：予約実行）</button>
      <div class="hint">お名前と電話番号は必須です</div>
    </section>

    <!-- flatpickr JS（app.js より先） -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ja.js"></script>

    <script src="./app.js"></script>
  </body>
</html>
